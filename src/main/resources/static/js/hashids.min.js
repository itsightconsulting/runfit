function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var s=0;s<e.length;s++){var h=e[s];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(t,h.key,h)}}function _createClass(t,e,s){return e&&_defineProperties(t.prototype,e),s&&_defineProperties(t,s),t}var Hashids=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890";_classCallCheck(this,t);var a,r,n="";this.escapeRegExp=function(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},this.parseInt=function(t,e){return/^(-|\+)?([0-9]+|Infinity)$/.test(t)?parseInt(t,e):NaN},this.seps="cfhistuCFHISTU",this.minLength=parseInt(s,10)>0?s:0,this.salt="string"==typeof e?e:"","string"==typeof h&&(this.alphabet=h);for(var i=0;i!==this.alphabet.length;i++)-1===n.indexOf(this.alphabet.charAt(i))&&(n+=this.alphabet.charAt(i));if(this.alphabet=n,this.alphabet.length<16)throw"error: alphabet must contain at least X unique characters".replace("X",16);if(-1!==this.alphabet.search(" "))throw"error: alphabet cannot contain spaces";for(var l=0;l!==this.seps.length;l++){var p=this.alphabet.indexOf(this.seps.charAt(l));-1===p?this.seps=this.seps.substr(0,l)+" "+this.seps.substr(l+1):this.alphabet=this.alphabet.substr(0,p)+" "+this.alphabet.substr(p+1)}this.alphabet=this.alphabet.replace(/ /g,""),this.seps=this.seps.replace(/ /g,""),this.seps=this._shuffle(this.seps,this.salt),(!this.seps.length||this.alphabet.length/this.seps.length>3.5)&&(a=Math.ceil(this.alphabet.length/3.5))>this.seps.length&&(r=a-this.seps.length,this.seps+=this.alphabet.substr(0,r),this.alphabet=this.alphabet.substr(r)),this.alphabet=this._shuffle(this.alphabet,this.salt);var u=Math.ceil(this.alphabet.length/12);this.alphabet.length<3?(this.guards=this.seps.substr(0,u),this.seps=this.seps.substr(u)):(this.guards=this.alphabet.substr(0,u),this.alphabet=this.alphabet.substr(u))}return _createClass(t,[{key:"encode",value:function(){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];if(!e.length)return"";if(e[0]&&e[0].constructor===Array&&!(e=e[0]).length)return"";for(var h=0;h!==e.length;h++)if(e[h]=this.parseInt(e[h],10),!(e[h]>=0))return"";return this._encode(e)}},{key:"decode",value:function(t){return t&&t.length&&"string"==typeof t?this._decode(t,this.alphabet):[]}},{key:"encodeHex",value:function(t){if(t=t.toString(),!/^[0-9a-fA-F]+$/.test(t))return"";for(var e=t.match(/[\w\W]{1,12}/g),s=0;s!==e.length;s++)e[s]=parseInt("1"+e[s],16);return this.encode.apply(this,e)}},{key:"decodeHex",value:function(t){for(var e=[],s=this.decode(t),h=0;h!==s.length;h++)e+=s[h].toString(16).substr(1);return e}},{key:"_encode",value:function(t){for(var e,s=this.alphabet,h=0,a=0;a!==t.length;a++)h+=t[a]%(a+100);for(var r=e=s.charAt(h%s.length),n=0;n!==t.length;n++){var i=t[n],l=r+this.salt+s;s=this._shuffle(s,l.substr(0,s.length));var p=this._toAlphabet(i,s);if(e+=p,n+1<t.length){var u=(i%=p.charCodeAt(0)+n)%this.seps.length;e+=this.seps.charAt(u)}}if(e.length<this.minLength){var o=(h+e[0].charCodeAt(0))%this.guards.length,c=this.guards[o];(e=c+e).length<this.minLength&&(o=(h+e[2].charCodeAt(0))%this.guards.length,e+=c=this.guards[o])}for(var g=parseInt(s.length/2,10);e.length<this.minLength;){var f=(e=(s=this._shuffle(s,s)).substr(g)+e+s.substr(0,g)).length-this.minLength;f>0&&(e=e.substr(f/2,this.minLength))}return e}},{key:"_decode",value:function(t,e){var s=[],h=0,a=new RegExp("[".concat(this.escapeRegExp(this.guards),"]"),"g"),r=t.replace(a," "),n=r.split(" ");if(3!==n.length&&2!==n.length||(h=1),void 0!==(r=n[h])[0]){var i=r[0];r=r.substr(1),a=new RegExp("[".concat(this.escapeRegExp(this.seps),"]"),"g"),n=(r=r.replace(a," ")).split(" ");for(var l=0;l!==n.length;l++){var p=n[l],u=i+this.salt+e;e=this._shuffle(e,u.substr(0,e.length)),s.push(this._fromAlphabet(p,e))}this.encode(s)!==t&&(s=[])}return s}},{key:"_shuffle",value:function(t,e){var s;if(!e.length)return t;for(var h=(t=t.split("")).length-1,a=0,r=0,n=0;h>0;h--,a++){a%=e.length,r+=s=e.charCodeAt(a);var i=t[n=(s+a+r)%h];t[n]=t[h],t[h]=i}return t=t.join("")}},{key:"_toAlphabet",value:function(t,e){var s="";do{s=e.charAt(t%e.length)+s,t=parseInt(t/e.length,10)}while(t);return s}},{key:"_fromAlphabet",value:function(t,e){return t.split("").map(function(t){return e.indexOf(t)}).reduce(function(t,s){return t*e.length+s},0)}}]),t}();